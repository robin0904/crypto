<!DOCTYPE html>
<html>
<head>
<title>Crypto NEON Detail</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
body{
 background:#02030d;
 color:#fff;
 font-family:Poppins,sans-serif;
 margin:0;padding:0;
 overflow-x:hidden;
}

/* GRID */
.page{
 display:flex;
 justify-content:center;
 gap:25px;
 padding:30px 10px 120px;
}

/* MAIN NEON BOX */
.card{
 width:850px;
 background:rgba(0,0,15,.7);
 border-radius:20px;
 border:2px solid rgba(0,255,255,.15);
 box-shadow:0 0 35px rgba(0,255,255,.15);
 padding:25px;
 backdrop-filter:blur(12px);
 animation:fadeIn .8s ease forwards;
}

/* SIDEBARS */
.newsCol{
 width:260px;
 background:rgba(255,255,255,.05);
 border-radius:18px;
 border:1px solid rgba(0,255,255,.2);
 backdrop-filter:blur(10px);
 height:650px;
 overflow:auto;
 padding-bottom:50px;
 animation:fadeIn .8s ease forwards;
}

.newsItem{
 padding:12px;
 border-bottom:1px solid rgba(255,255,255,.07);
 cursor:pointer;
 font-size:14px;
}
.newsItem:hover{
 background:rgba(0,255,255,.12);
}

/* TITLES */
h1,h2{
 margin:0 0 10px 0;
 font-weight:600;
 letter-spacing:1px;
 color:#0ff;
 text-shadow:0 0 15px #0ff;
}

/* INDICATOR ROW */
.indicators{
 display:flex;
 gap:12px;
 margin:20px 0;
}
.indBox{
 flex:1;
 background:rgba(255,255,255,.03);
 border-radius:14px;
 border:1px solid rgba(0,255,255,.3);
 padding:10px;
 text-align:center;
 color:#74faff;
 font-size:14px;
 text-shadow:0 0 6px rgba(0,255,255,.7);
}
.indBox:hover{
 box-shadow:0 0 18px #00ffee;
 border-color:#00ffee;
}

/* MINI TECH */
.tech{
 background:rgba(255,255,255,.04);
 border-radius:12px;
 border:1px solid rgba(255,255,255,.15);
 padding:18px;
 display:flex;
 justify-content:space-between;
 margin-top:25px;
}
.tech div{width:48%;}

/* SPARK */
#spark{
 width:180px;
 height:60px;
 filter:drop-shadow(0 0 12px #00ffe2);
 border-radius:6px;
}

/* CHART */
.chartBox{
 border-radius:16px;
 border:2px solid rgba(0,255,255,.25);
 box-shadow:0 0 25px rgba(0,255,255,.25);
 overflow:hidden;
 margin-top:30px;
}

/* NEWS */
.newsBadge{
 font-size:10px;
 background:linear-gradient(45deg,#fe0066,#ff8800);
 padding:3px 6px;
 border-radius:5px;
 margin-right:6px;
}
.newsDate{
 font-size:10px;opacity:.6;margin-top:4px;
}

/* FADE */
.fade{opacity:0;transform:translateY(40px);}
.fade.show{opacity:1;transform:translateY(0);transition:1s;}

.green{color:#00ff9d;}
.red{color:#ff3366;}

@keyframes fadeIn{
 from{opacity:0;transform:translateY(40px);}
 to{opacity:1;transform:translateY(0);}
}
</style>
</head>

<body>

<div class="page">

<div class="newsCol fade" id="newsLeft"></div>

<div class="card fade">

 <h1 id="name"></h1>
 <img id="logo" width="70"/>

 <!-- spark -->
 <canvas id="spark"></canvas>

 <h2 id="price"></h2>
 <div id="change"></div>

 <!-- new indicator row -->
 <div class="indicators">
   <div class="indBox" id="waprice"></div>
   <div class="indBox" id="rsi"></div>
   <div class="indBox" id="fear"></div>
 </div>

 <div id="prediction"></div>

 <br>
 <div id="yesterday"></div>
 <div id="high"></div>
 <div id="low"></div>
 <br>
 <div id="recommend"></div>

 <div class="tech fade">
     <div>
         <b>Market Rank</b><br><span id="rank"></span><br><br>
         <b>Circulating</b><br><span id="circ"></span><br><br>
         <b>Total Supply</b><br><span id="total"></span>
     </div>
     <div>
         <b>ATH Price</b><br><span id="ath"></span><br><br>
         <b>Market Cap</b><br><span id="mcap"></span>
     </div>
 </div>

 <br>
 <b id="support"></b><br>
 <b id="resistance"></b>

 <div class="chartBox fade">
   <div id="chart"></div>
 </div>

</div>

<div class="newsCol fade" id="newsRight"></div>

</div>


<script>
// fade scroll
const obs=new IntersectionObserver(e=>{
 e.forEach(x=>{if(x.isIntersecting)x.target.classList.add("show")})
})
document.querySelectorAll(".fade").forEach(el=>obs.observe(el))


async function load(){
 let p=new URLSearchParams(location.search)
 let id=p.get("id")

 let r=await fetch(`https://api.coingecko.com/api/v3/coins/markets?vs_currency=inr&ids=${id}`)
 let c=(await r.json())[0]

 document.getElementById("name").innerHTML=c.name
 document.getElementById("price").innerHTML="â‚¹ "+c.current_price.toLocaleString()
 document.getElementById("change").innerHTML=c.price_change_percentage_24h.toFixed(2)+"%"
 document.getElementById("logo").src=c.image

 document.getElementById("rank").innerHTML="#"+c.market_cap_rank
 document.getElementById("circ").innerHTML=c.circulating_supply?.toLocaleString()
 document.getElementById("total").innerHTML=c.total_supply?.toLocaleString()
 document.getElementById("mcap").innerHTML="â‚¹"+c.market_cap?.toLocaleString()
 document.getElementById("ath").innerHTML="â‚¹"+c.ath?.toLocaleString()

 // history
 let rr=await fetch(`https://api.coingecko.com/api/v3/coins/${id}/market_chart?vs_currency=inr&days=60`)
 let hist=await rr.json()
 let prices=hist.prices.map(p=>p[1])

 let y=prices[0]
 let last=prices.at(-1)

 document.getElementById("yesterday").innerHTML="Yesterday: â‚¹ "+Math.round(y).toLocaleString()
 document.getElementById("recommend").innerHTML=
   last>y?"<span class='green'>Bullish â†—</span>":"<span class='red'>Bearish â†˜</span>"

 document.getElementById("high").innerHTML="24h High: â‚¹ "+c.high_24h.toLocaleString()
 document.getElementById("low").innerHTML="24h Low: â‚¹ "+c.low_24h.toLocaleString()

 document.getElementById("support").innerHTML="Support: â‚¹ "+Math.round(c.low_24h*.99)
 document.getElementById("resistance").innerHTML="Resistance: â‚¹ "+Math.round(c.high_24h*1.01)

 // sparkline
 let ctx=document.getElementById("spark").getContext("2d")
 ctx.beginPath()
 ctx.strokeStyle="#00ffe2"
 prices.slice(-50).forEach((v,i)=>{
   let y=60-(v/Math.max(...prices.slice(-50))*60)
   if(i==0) ctx.moveTo(i*4,y)
   else ctx.lineTo(i*4,y)
 })
 ctx.stroke()

 // RSI
 let rsi=calcRSI(prices.slice(-100))
 document.getElementById("rsi").innerHTML="RSI: "+rsi.toFixed(1)

 // AI note
 document.getElementById("prediction").innerHTML =
   rsi>70?"âš  Overbought":"ðŸŸ¡ Neutral"

 // FearGreed
 let fg=await fetch("https://api.alternative.me/fng/")
 let fgdata=await fg.json()
 document.getElementById("fear").innerHTML=
  "Fear: "+fgdata.data[0].value

 // WazirX
 let wx=await fetch("https://api.wazirx.com/api/v2/tickers")
 let data=await wx.json()
 let t=c.symbol.toLowerCase()+"inr"
 if(data[t]) document.getElementById("waprice").innerHTML=
   "WazirX: â‚¹"+data[t].buy

 loadNewsPanels(id)

 // chart
 document.getElementById("chart").innerHTML=
 `<iframe width="100%" height="450" frameborder="0"
 src="https://s.tradingview.com/widgetembed/?symbol=${c.symbol.toUpperCase()}USD&interval=60&theme=dark"></iframe>`
}

// RSI function
function calcRSI(arr){
 let g=0,l=0
 for(let i=1;i<15;i++){
   let d=arr[i]-arr[i-1]
   if(d>0) g+=d; else l+=Math.abs(d)
 }
 let rs=g/(l||1)
 return 100-(100/(1+rs))
}

// NEWS
async function loadNewsPanels(keyword){
 let r=await fetch(`https://cryptopanic.com/news/rss/?q=${keyword}`)
 let text=await r.text()
 let parser=new DOMParser()
 let xml=parser.parseFromString(text,"text/xml")
 let items=[...xml.getElementsByTagName("item")]

 let loop=[...items,...items]

 let L="",R=""
 loop.forEach((it,i)=>{
   let t=it.querySelector("title")?.textContent||""
   let d=it.querySelector("pubDate")?.textContent||""
   let l=it.querySelector("link")?.textContent||""
   let cell=`<div class="newsItem" onclick="window.open('${l}','_blank')">
   <span class="newsBadge">NEWS</span>${t}<div class="newsDate">${d}</div>
   </div>`
   if(i%2==0)L+=cell;else R+=cell
 })
 document.getElementById("newsLeft").innerHTML=L
 document.getElementById("newsRight").innerHTML=R
}

load()
</script>

</body>
</html>
