<!DOCTYPE html>
<html>
<head>
<title>Crypto NEON Detail</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
body{
 background:#02030d;
 color:#fff;
 font-family:Poppins,sans-serif;
 margin:0;padding:0;
 overflow-x:hidden;
}

/* PAGE GRID */
.page{
 display:flex;
 justify-content:center;
 gap:25px;
 padding:30px 10px 120px;
}

/* MAIN CONTAINER */
.card{
 width:850px;
 background:rgba(0,0,15,.7);
 border-radius:20px;
 border:2px solid rgba(0,255,255,.15);
 box-shadow:0 0 35px rgba(0,255,255,.15);
 padding:25px;
 backdrop-filter:blur(12px);
 animation:fadeIn .8s ease forwards;
}

/* SIDE NEWS COLUMN */
.newsCol{
 width:260px;
 background:rgba(255,255,255,.05);
 border-radius:18px;
 border:1px solid rgba(0,255,255,.2);
 backdrop-filter:blur(10px);
 height:650px;
 overflow:auto;
 padding-bottom:50px;
 position:relative;
}

/* NEWS ITEMS */
.newsItem{
 padding:12px;
 border-bottom:1px solid rgba(255,255,255,.07);
 cursor:pointer;
 font-size:14px;
 opacity:0;
 animation:floatUp .8s ease forwards;
}
.newsItem:hover{
 background:rgba(0,255,255,.12);
}
.newsBadge{
 font-size:10px;
 background:linear-gradient(45deg,#fe0066,#ff8800);
 padding:3px 6px;
 border-radius:5px;
 margin-right:6px;
}
.newsDate{font-size:10px;opacity:.6;margin-top:4px;}

/* INDICATOR CHIPS */
.indicators{
 display:flex;
 gap:12px;
 margin:25px 0;
}
.chip{
 flex:1;
 background:rgba(255,255,255,.04);
 border-radius:14px;
 border:1px solid rgba(0,255,255,.35);
 padding:10px;
 text-align:center;
 color:#74faff;
 font-size:14px;
 text-shadow:0 0 6px rgba(0,255,255,.8);
}
.chip:hover{
 box-shadow:0 0 16px #00ffee;
 border-color:#00ffee;
}

/* SPARKLINE */
#spark{
 width:190px;height:60px;
 filter:drop-shadow(0 0 12px #00ffe2);
}

/* INFO GRID */
.infoGrid{
 display:grid;
 grid-template-columns:repeat(3,1fr);
 gap:14px;
 margin:20px 0;
}
.infoCard{
 background:rgba(255,255,255,.03);
 padding:14px;
 border-radius:12px;
 border:1px solid rgba(255,255,255,.1);
}

/* STATS GRID */
.stats{
 margin-top:30px;
 display:grid;
 grid-template-columns:repeat(2,1fr);
 gap:18px;
}
.statCard{
 background:rgba(255,255,255,.04);
 border:1px solid rgba(0,255,255,.25);
 padding:18px;
 border-radius:14px;
}

/* SUPPORT BOX */
.supportBox{
 background:rgba(255,255,255,.05);
 border:1px solid rgba(0,255,255,.3);
 padding:14px;
 border-radius:14px;
 margin-top:25px;
 font-size:16px;
 text-shadow:0 0 8px rgba(0,255,255,.4);
}

/* CHART */
.chartBox{
 border-radius:16px;
 border:2px solid rgba(0,255,255,.25);
 box-shadow:0 0 25px rgba(0,255,255,.25);
 overflow:hidden;
 margin-top:35px;
}

/* ANIMATIONS */
.fade{opacity:0;transform:translateY(40px);}
.fade.show{opacity:1;transform:translateY(0);transition:1s;}
@keyframes floatUp{
 from{opacity:0;transform:translateY(20px);}
 to{opacity:1;transform:translateY(0);}
}
@keyframes fadeIn{
 from{opacity:0;transform:translateY(40px);}
 to{opacity:1;transform:translateY(0);}
}

.green{color:#00ff9d;}
.red{color:#ff3366;}
</style>
</head>

<body>

<div class="page">

<!-- LEFT NEWS -->
<div class="newsCol" id="newsLeft"></div>

<!-- MAIN CARD -->
<div class="card fade">

 <h1 id="name"></h1>
 <img id="logo" width="70"/>

 <canvas id="spark"></canvas>

 <h2 id="price"></h2>
 <div id="change"></div>

 <!-- INDICATORS -->
 <div class="indicators">
   <div class="chip" id="waprice"></div>
   <div class="chip" id="rsi"></div>
   <div class="chip" id="fear"></div>
 </div>

 <div id="prediction"></div>

 <!-- INFO GRID -->
 <div class="infoGrid">
   <div class="infoCard" id="yesterday"></div>
   <div class="infoCard" id="high"></div>
   <div class="infoCard" id="low"></div>
 </div>

 <!-- TREND -->
 <div id="recommend"></div>

 <!-- STATS -->
 <div class="stats fade">
   <div class="statCard">
     <b>Market Rank</b><br><span id="rank"></span><br><br>
     <b>Circulating</b><br><span id="circ"></span><br><br>
     <b>Total Supply</b><br><span id="total"></span>
   </div>

   <div class="statCard">
     <b>ATH Price</b><br><span id="ath"></span><br><br>
     <b>Market Cap</b><br><span id="mcap"></span>
   </div>
 </div>

 <!-- SUPPORT -->
 <div class="supportBox">
   <div id="support"></div>
   <div id="resistance"></div>
 </div>

 <!-- NEON CHART -->
 <div class="chartBox fade">
   <div id="chart"></div>
 </div>

</div>

<!-- RIGHT NEWS -->
<div class="newsCol" id="newsRight"></div>

</div>

<script>
// Fade observer
const obs=new IntersectionObserver(e=>{
 e.forEach(x=>{if(x.isIntersecting)x.target.classList.add("show")})
})
document.querySelectorAll(".fade").forEach(el=>obs.observe(el))

// Load main data
async function load(){
 let p=new URLSearchParams(location.search)
 let id=p.get("id")

 let r=await fetch(`https://api.coingecko.com/api/v3/coins/markets?vs_currency=inr&ids=${id}`)
 let c=(await r.json())[0]

 document.getElementById("name").innerHTML=c.name
 document.getElementById("logo").src=c.image
 document.getElementById("price").innerHTML="â‚¹ "+c.current_price.toLocaleString()
 document.getElementById("change").innerHTML=c.price_change_percentage_24h.toFixed(2)+"%"

 // --- HISTORY ---
 let rr=await fetch(`https://api.coingecko.com/api/v3/coins/${id}/market_chart?vs_currency=inr&days=60`)
 let hist=await rr.json()
 let prices=hist.prices.map(p=>p[1])

 let y=prices[0], last=prices.at(-1)

 document.getElementById("yesterday").innerHTML="ðŸ•’ Yesterday<br>â‚¹ "+Math.round(y).toLocaleString()
 document.getElementById("high").innerHTML="ðŸ“ˆ 24H High<br>â‚¹ "+c.high_24h.toLocaleString()
 document.getElementById("low").innerHTML="ðŸ“‰ 24H Low<br>â‚¹ "+c.low_24h.toLocaleString()

 document.getElementById("recommend").innerHTML =
   last>y ? "<span class='green'>Bullish â†‘</span>" : "<span class='red'>Bearish â†“</span>"

 // --- STATS ---
 document.getElementById("rank").innerHTML="#"+c.market_cap_rank
 document.getElementById("circ").innerHTML=c.circulating_supply?.toLocaleString()
 document.getElementById("total").innerHTML=c.total_supply?.toLocaleString()
 document.getElementById("mcap").innerHTML="â‚¹"+c.market_cap?.toLocaleString()
 document.getElementById("ath").innerHTML="â‚¹"+c.ath?.toLocaleString()

 // Support/Resistance
 document.getElementById("support").innerHTML="Support: â‚¹ "+Math.round(c.low_24h*.99)
 document.getElementById("resistance").innerHTML="Resistance: â‚¹ "+Math.round(c.high_24h*1.01)

 // --- SPARKLINE ---
 let ctx=document.getElementById("spark").getContext("2d")
 ctx.beginPath()
 ctx.strokeStyle="#00ffe2"
 prices.slice(-50).forEach((v,i)=>{
   let y=60-(v/Math.max(...prices.slice(-50))*60)
   if(i==0) ctx.moveTo(i*4,y)
   else ctx.lineTo(i*4,y)
 })
 ctx.stroke()

 // --- RSI ---
 let rsi=RSI(prices.slice(-100))
 document.getElementById("rsi").innerHTML="RSI: "+rsi.toFixed(1)

 document.getElementById("prediction").innerHTML =
   rsi>70? "Overbought âš ":
   rsi<30? "Oversold âš ":"Neutral ðŸŸ¡"

 // --- Fear & Greed ---
 let fg=await fetch("https://api.alternative.me/fng/")
 let fgdata=await fg.json()
 document.getElementById("fear").innerHTML="Fear: "+fgdata.data[0].value

 // --- WazirX price ---
 let wx=await fetch("https://api.wazirx.com/api/v2/tickers")
 let data=await wx.json()
 let t=c.symbol.toLowerCase()+"inr"
 if(data[t]) document.getElementById("waprice").innerHTML="WazirX: â‚¹"+data[t].buy

 // --- Chart ---
 document.getElementById("chart").innerHTML =
 `<iframe width="100%" height="450" frameborder="0"
 src="https://s.tradingview.com/widgetembed/?symbol=${c.symbol.toUpperCase()}USD&interval=60&theme=dark"></iframe>`

 loadNews(id)
}

// RSI calc
function RSI(arr){
 let g=0,l=0
 for(let i=1;i<15;i++){
   let d=arr[i]-arr[i-1]
   if(d>0) g+=d; else l+=Math.abs(d)
 }
 let rs=g/(l||1)
 return 100-(100/(1+rs))
}

// NEWS AUTO SCROLL
async function loadNews(id){
 let r=await fetch(`https://cryptopanic.com/news/rss/?q=${id}`)
 let t=await r.text()
 let x=new DOMParser().parseFromString(t,"text/xml")
 let items=[...x.getElementsByTagName("item")]

 let dup=[...items,...items]

 let L="",R=""
 dup.forEach((i,n)=>{
   let title=i.querySelector("title")?.textContent
   let date=i.querySelector("pubDate")?.textContent
   let link=i.querySelector("link")?.textContent
   let cell=`<div class="newsItem" onclick="window.open('${link}')">
       <span class='newsBadge'>NEWS</span>${title}
       <div class='newsDate'>${date}</div>
   </div>`
   if(n%2==0) L+=cell; else R+=cell
 })

 document.getElementById("newsLeft").innerHTML=L
 document.getElementById("newsRight").innerHTML=R

 autoScrollColumn(document.getElementById("newsLeft"))
 autoScrollColumn(document.getElementById("newsRight"))
}

// Auto-scroll logic
function autoScrollColumn(col){
 let run=true
 col.addEventListener("mouseenter",()=>run=false)
 col.addEventListener("mouseleave",()=>run=true)
 setInterval(()=>{ if(run) col.scrollBy({top:1,left:0,behavior:"smooth"}) },60)
}

load()
</script>

</body>
</html>
