<!DOCTYPE html>
<html>
<head>
<title>Coin Detail</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{
 background:#000;
 color:#fff;
 font-family:Poppins;
 padding:20px;
}
.box{
 background:#111;
 padding:20px;
 border-radius:12px;
 max-width:600px;
 margin:auto;
 border:1px solid #222;
}
.price{font-size:32px;font-weight:600;}
.chart{margin-top:25px;}
.green{color:#4aff4a}
.red{color:#ff5757}
</style>
</head>

<body>

<div class="box">
 <h1 id="name"></h1>
 <div class="price" id="price"></div>
 <div id="change"></div>

 <br>
 <div id="yesterday"></div>
 <div id="high"></div>
 <div id="low"></div>

 <div id="recommend"></div>

 <div class="chart" id="chart"></div>
</div>

<script>
async function load(){
 let params=new URLSearchParams(location.search)
 let id=params.get("id")

 // Basic
 let res1=await fetch(
   `https://api.coingecko.com/api/v3/coins/markets?vs_currency=inr&ids=${id}`
 )
 let c=(await res1.json())[0]

 document.getElementById("name").innerHTML=c.name
 document.getElementById("price").innerHTML="‚Çπ "+c.current_price.toLocaleString()
 document.getElementById("change").innerHTML=c.price_change_percentage_24h.toFixed(2)+"%"

 // history data to compare yesterday
 let res2=await fetch(`https://api.coingecko.com/api/v3/coins/${id}/market_chart?vs_currency=inr&days=2`)
 let hist=await res2.json()

 let yesterday=hist.prices[0][1]
 document.getElementById("yesterday").innerHTML="Yesterday: ‚Çπ "+Math.round(yesterday).toLocaleString()

 let last=hist.prices[hist.prices.length-1][1]
 if(last > yesterday){
   document.getElementById("recommend").innerHTML="<span class='green'>Today price is higher than yesterday ‚Äî bullish signal üî•</span>"
 }else{
   document.getElementById("recommend").innerHTML="<span class='red'>Today Below yesterday ‚Äî bearish ‚ö†Ô∏è</span>"
 }

 // high low today
 document.getElementById("high").innerHTML="24h High: ‚Çπ "+c.high_24h.toLocaleString()
 document.getElementById("low").innerHTML="24h Low: ‚Çπ "+c.low_24h.toLocaleString()

 // TradingView chart
 document.getElementById("chart").innerHTML=
 `<iframe width="100%" height="400" frameborder="0"
 src="https://s.tradingview.com/widgetembed/?symbol=${c.symbol.toUpperCase()}USD&interval=60&theme=dark">
 </iframe>`
}
load()
</script>
</body>
</html>
